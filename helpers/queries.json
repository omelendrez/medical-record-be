{
  "appointments": {
    "rows": "SELECT c.id, p.name 'petName', cu.name 'customerName', DATE_FORMAT(c.nextAppointment, '%Y-%m-%d') nextAppointment, 'consultas' type, c.customerId, c.petId FROM consultations c INNER JOIN pets p ON c.petId = p.id INNER JOIN customers cu ON c.customerId = cu.id WHERE c.nextAppointment IS NOT NULL AND p.name LIKE '%{filter}%' AND c.nextAppointment >= CURDATE() UNION SELECT v.id, p.name, cu.name, DATE_FORMAT(v.nextAppointment, '%Y-%m-%d'), 'vacunaciones', v.customerId, v.petId FROM vaccinations v INNER JOIN pets p ON v.petId = p.id INNER JOIN customers cu ON v.customerId = cu.id WHERE v.nextAppointment IS NOT NULL AND p.name LIKE '%{filter}%' AND v.nextAppointment >= CURDATE()  UNION SELECT d.id, p.name, cu.name, DATE_FORMAT(d.nextAppointment, '%Y-%m-%d'), 'desparasitaciones', d.customerId, d.petId FROM dewormings d INNER JOIN pets p ON d.petId = p.id INNER JOIN customers cu ON d.customerId =cu.id WHERE d.nextAppointment IS NOT NULL AND p.name LIKE '%{filter}%' AND d.nextAppointment >= CURDATE() ORDER BY nextAppointment LIMIT {offset}, {limit};",
    "count": "SELECT count(*) total FROM consultations c INNER JOIN pets p ON c.petId = p.id INNER JOIN customers cu ON c.customerId = cu.id WHERE c.nextAppointment IS NOT NULL AND p.name LIKE '%{filter}%'  AND c.nextAppointment >= CURDATE() UNION SELECT count(*) FROM vaccinations v INNER JOIN pets p ON v.petId = p.id INNER JOIN customers cu ON v.customerId = cu.id WHERE v.nextAppointment IS NOT NULL AND p.name LIKE '%{filter}%'  AND v.nextAppointment >= CURDATE()  UNION SELECT count(*) FROM dewormings d INNER JOIN pets p ON d.petId = p.id INNER JOIN customers cu ON d.customerId =cu.id WHERE d.nextAppointment IS NOT NULL AND p.name LIKE '%{filter}%'  AND nextAppointment >= CURDATE()"
  }
}
