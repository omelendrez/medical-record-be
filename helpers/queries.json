{
  "appointments": {
    "rows": "SELECT c.id, p.`name` 'petName', cu.`name` 'customerName', DATE_FORMAT(c.`nextAppointment`, '%Y-%m-%d') `nextAppointment`, 'consultas' `type`, c.`customerId`, c.`petId` FROM consultations c INNER JOIN pets p ON c.petId = p.id INNER JOIN customers cu ON c.customerId = cu.id WHERE c.`nextAppointment` IS NOT NULL AND p.`name` LIKE '%{filter}%' AND `nextAppointment` >= CURDATE() UNION SELECT v.id, p.`name`, cu.`name`, DATE_FORMAT(v.`nextAppointment`, '%Y-%m-%d'), 'vacunaciones', v.CustomerId, v.PetId FROM vaccinations v INNER JOIN pets p ON v.PetId = p.Id INNER JOIN customers cu ON v.CustomerId = cu.Id WHERE v.NextAppointment IS NOT NULL AND p.`name` LIKE '%{filter}%' AND nextAppointment >= CURDATE()  UNION SELECT d.id, p.`name`, cu.Name, DATE_FORMAT(d.NextAppointment, '%Y-%m-%d'), 'desparasitaciones', d.cUstomerId, d.pEtId FROM dewormings d INNER JOIN pets p ON D.pEtId = P.iD INNER JOIN customers cu ON D.cUstomerId = Cu.iD WHERE d.nExtAppointment IS NOT NULL AND p.`name` LIKE '%{filter}%' AND NextAppointment >= CURDATE() ORDER BY NextAppointment LIMIT {offset}, {limit};",
    "count": "SELECT count(*) total FROM consultations c INNER JOIN pets p ON c.petId = p.id INNER JOIN customers cu ON c.customerId = cu.id WHERE c.`nextAppointment` IS NOT NULL AND p.`name` LIKE '%{filter}%'  AND `nextAppointment` >= CURDATE() UNION SELECT count(*) FROM vaccinations v INNER JOIN pets p ON v.PetId = p.Id INNER JOIN customers cu ON v.CustomerId = cu.Id WHERE v.NextAppointment IS NOT NULL AND p.`name` LIKE '%{filter}%'  AND nextAppointment >= CURDATE()  UNION SELECT count(*) FROM dewormings d INNER JOIN pets p ON D.pEtId = P.iD INNER JOIN customers cu ON D.cUstomerId = Cu.iD WHERE d.nExtAppointment IS NOT NULL AND p.`name` LIKE '%{filter}%'  AND NextAppointment >= CURDATE()"
  }
}
